{% extends 'layout.html' %}
{% block body %}
<div class="container">
    <div class="row">
        <div class="col-md-12">
            {% block content %}
            <h1>What would you like to Smak {{ id }}?</h1>
            <hr />
            <div class="input-group">
	          <form name="myform" onSubmit="return false;">
	            <textarea type="input" placeholder="What would you like to SMAK?" id='box' name="smak" ></textarea>
	            <button class="btn btn-info" id='sub' type="submit">SMAK!!!</button>
	          </form>
        </div>
      </div>
            {% endblock %}
        </div>
    </div>
</div>
{% endblock %}

{% block js %}
<script>

	document.getElementById("sub").addEventListener(
		'click',
		function(){
			smak(document.getElementById("box").value);
		},
		false);
	function smak(text){

	  function reqListener () {
	    var tmplist = this.responseText.split(',')
	    console.log( tmplist )
	    
	  }
	  var oReq = new XMLHttpRequest();
	  var post = {
	  	"id" : "{{id}}",
	  	"smak" : text
	  }

	  oReq.addEventListener("load", reqListener);

	  oReq.open("POST", "/smak", true);

	  oReq.onreadystatechange = function() {
	       if (oReq.readyState == 4 && oReq.status == 200) {
	          console.log('Ready')
	          //getMyList()
	       }
	    }
	  oReq.send('smak=' + {{id}})


	}
</script>
{% endblock %}
